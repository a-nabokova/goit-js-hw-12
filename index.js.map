{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\n import axios from \"axios\";\n\nconst API_KEY = '43833288-fbb1d2e0a0a3e0585e57923e3'; \n\n \n  \nexport async function getImagesByQuery(query, page = 1) {\n\n    \n        const response = await  axios('https://pixabay.com/api/', {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: \"photo\",\n                orientation: 'horizontal',\n                safesearch: true,\n                per_page: 15,\n                page: page,\n            }\n        })\n       \n        return response.data;\n\n    \n}","\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n// import { loader } from '../main';\n// import { loadBtn } from '../main';\n \nexport const gallery = document.querySelector('.gallery');\n \n\n\n const lightbox = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionDelay: 250,\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n  });\n\n \n\nexport function createGallery(images) {\n   const markup =  images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n        return ` <li class=\"gallery-item\">\n        <div class=\"photo-card\">\n          <a href=\"${largeImageURL}\" class=\"gallery-link\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n          </a>\n          <div class=\"info\">\n            <p class=\"info-item\">\n              <b>Likes</b> <span class=\"info-span\">${likes}</span>\n            </p>\n            <p class=\"info-item\">\n              <b>Views</b> <span class=\"info-span\">${views}</span>\n            </p>\n            <p class=\"info-item\">\n              <b>Comments</b> <span class=\"info-span\">${comments}</span>\n            </p>\n            <p class=\"info-item\">\n              <b>Downloads</b> <span class=\"info-span\">${downloads}</span>\n            </p>\n          </div>\n        </div>\n      </li>`\n     }\n    ).join('');\n\n      gallery.insertAdjacentHTML('beforeend', markup);\n\n\n lightbox.refresh();\n}\n\n\n\nexport function clearGallery() {\n    return gallery.innerHTML = '';\n \n}\n\nexport function showLoader(loader) {\n     loader.classList.remove('hidden');\n\n}\n\nexport function hideLoader(loader) {\n    loader.classList.add('hidden');\n}\n\nexport function showLoadMoreButton(loadBtn) {\n  loadBtn.classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton(loadBtn) {\n  loadBtn.classList.add('hidden');\n}\n\nexport function disableLoadBtn(loadBtn) {\n  loadBtn.disabled = true;\n}\n\nexport function enableLoadBtn(loadBtn) {\n  loadBtn.disabled = false;\n}\n\n  ","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nimport { getImagesByQuery } from './js/pixabay-api'\nimport {createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton, disableLoadBtn, enableLoadBtn, gallery } from './js/render-functions'\n\n\n\nconst form = document.querySelector('.form');\nconst input = document.querySelector('.input-js');\nconst loader = document.querySelector('.loader');\nconst loadBtn = document.querySelector('.load-btn'); \n\nlet page = 1; \nlet valueToShow = '';\nlet perPage = 15;\nlet galleryCardHeight;\n\n  \nform.addEventListener('submit', handleSubmit);\n\n  async function handleSubmit(event) {\n    event.preventDefault(); \n        hideLoadMoreButton(loadBtn); \n\n   \n   \n   valueToShow = input.value.trim();\n     \n    if (valueToShow === '') {\n        iziToast.show({\n          message: 'Please fill in the field',\n          color: 'red',\n          position: 'topRight',\n\n        }) \n        return;\n    }  \n\n    page = 1;\n\n    clearGallery(gallery);\n    showLoader(loader);\n     \n    \n\n    try {\n      const data = await getImagesByQuery(valueToShow, page)\n        \n      const items = data.hits; \n       \n        if (items.length === 0) {\n          iziToast.show({\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n            color: 'red',\n            position: 'topRight',\n          });\n          return;\n        }\n      createGallery(items);\n       \n\n      if (page * perPage < data.totalHits) {\n  showLoadMoreButton(loadBtn);\n} else {\n  iziToast.show({\n    message: 'We are sorry, but you have reached the end of search results.',\n    color: 'blue',\n    position: 'topRight',\n  });\n}\n      \n    } catch(error) {\n        iziToast.show({\n        message: 'Something went wrong',\n        color: 'red',\n      });\n    } finally {\n      hideLoader(loader); \n    }\n     \n}\n\n \n\nloadBtn.addEventListener('click', onLoadBtn);\n\nasync function onLoadBtn() {\n  page++;\n  disableLoadBtn(loadBtn); \n\n  try {\n\n    const data = await getImagesByQuery(valueToShow, page);\n    createGallery(data.hits); \n    if (data.hits.length === 0 || page * perPage >= data.totalHits) {\n      hideLoadMoreButton(loadBtn);\n      iziToast.show({\n        message: 'We are sorry, but you have reached the end of search results.'\n})\n      \n    }\n    \n     const galleryCard = document.querySelector('.gallery-item');\n\n      if(galleryCard) {\n        galleryCardHeight = galleryCard.getBoundingClientRect().height;\n      }\n\n      window.scrollBy({\n      top: galleryCardHeight * 2,\n      left: 0,\n      behavior: 'smooth',\n    });\n     \n\n  } catch (error) {\n    console.log(error);\n\n  } finally {\n    enableLoadBtn(loadBtn); \n  }\n   \n\n}"],"names":["API_KEY","getImagesByQuery","query","page","axios","gallery","lightbox","SimpleLightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","loader","hideLoader","showLoadMoreButton","loadBtn","hideLoadMoreButton","disableLoadBtn","enableLoadBtn","form","input","valueToShow","perPage","galleryCardHeight","handleSubmit","event","iziToast","data","items","onLoadBtn","galleryCard","error"],"mappings":"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"}